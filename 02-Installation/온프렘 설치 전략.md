# ì˜¨í”„ë ˜ ì„¤ì¹˜ ì „ëµ

## ğŸ¯ ì„¤ì¹˜ ë°©ë²• ë¹„êµ

### ì„¤ì¹˜ ë„êµ¬ë³„ íŠ¹ì§•

| ë°©ë²• | ë³µì¡ë„ | ê³ ê°€ìš©ì„± | ìš´ì˜ í¸ì˜ì„± | ì˜¨í”„ë ˜ ì í•©ì„± |
|------|--------|----------|-------------|---------------|
| kubeadm | ì¤‘ê°„ | âœ… | ì¤‘ê°„ | â­â­â­â­â­ |
| kops | ë†’ìŒ | âœ… | ë†’ìŒ | â­â­â­ |
| kubespray | ë†’ìŒ | âœ… | ë†’ìŒ | â­â­â­â­ |
| ë°”ì´ë„ˆë¦¬ ì„¤ì¹˜ | ë§¤ìš° ë†’ìŒ | âœ… | ë‚®ìŒ | â­â­ |
| Rancher | ë‚®ìŒ | âœ… | ë§¤ìš° ë†’ìŒ | â­â­â­â­ |

## ğŸ—ï¸ ê¶Œì¥ ì•„í‚¤í…ì²˜

### ì†Œê·œëª¨ í™˜ê²½ (ê°œë°œ/í…ŒìŠ¤íŠ¸)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Single Master Node          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚API+etcd â”‚ â”‚ Controller +    â”‚â”‚
â”‚  â”‚+Sched   â”‚ â”‚ Scheduler       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Worker1â”‚â”‚Worker2â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•**:
- ë§ˆìŠ¤í„° 1ëŒ€ + ì›Œì»¤ 2ëŒ€ ì´ìƒ
- ë¹„ìš© íš¨ìœ¨ì 
- ë‹¨ì¼ ì¥ì• ì  ì¡´ì¬

### ì¤‘ê·œëª¨ í™˜ê²½ (ìš´ì˜)
```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Load Balancer  â”‚
     â”‚   (HAProxy)     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
â”‚Master1â”‚ â”‚Master2â”‚ â”‚Master3â”‚
â”‚       â”‚ â”‚       â”‚ â”‚       â”‚
â”‚ etcd  â”‚ â”‚ etcd  â”‚ â”‚ etcd  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚           â”‚           â”‚
â”Œâ”€â–¼â”€â”€â”    â”Œâ”€â”€â–¼â”€â”€â”    â”Œâ”€â”€â–¼â”€â”€â”
â”‚WN1 â”‚    â”‚ WN2 â”‚    â”‚ WN3 â”‚
â””â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•**:
- ë§ˆìŠ¤í„° 3ëŒ€ (í™€ìˆ˜ ê°œ)
- ê³ ê°€ìš©ì„± ë³´ì¥
- ì¶”ì²œ êµ¬ì„±

### ëŒ€ê·œëª¨ í™˜ê²½ (ì—”í„°í”„ë¼ì´ì¦ˆ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         External Load Balancer      â”‚
â”‚            (F5/NetScaler)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚           â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
  â”‚Master1â”‚   â”‚Master2â”‚   â”‚Master3â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚           â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
  â”‚ etcd1 â”‚   â”‚ etcd2 â”‚   â”‚ etcd3 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”      â”Œâ”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â–¼â”€â”€â”€â”
â”‚Zone Aâ”‚      â”‚Zone Bâ”‚      â”‚Zone Câ”‚
â”‚WN1-10â”‚      â”‚WN11-20â”‚     â”‚WN21-30â”‚
â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•**:
- ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ê³¼ etcd ë¶„ë¦¬
- ë©€í‹° ì¡´ êµ¬ì„±
- ëŒ€ê·œëª¨ ì›Œì»¤ ë…¸ë“œ

## ğŸ”§ ì„¤ì¹˜ ì „ ì¤€ë¹„ì‚¬í•­

### í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

#### ìµœì†Œ ìš”êµ¬ì‚¬í•­
```yaml
ë§ˆìŠ¤í„° ë…¸ë“œ:
  CPU: 2 cores
  RAM: 4GB
  Storage: 50GB
  Network: 1Gbps

ì›Œì»¤ ë…¸ë“œ:
  CPU: 2 cores
  RAM: 4GB
  Storage: 50GB
  Network: 1Gbps
```

#### ìš´ì˜ ê¶Œì¥ì‚¬í•­
```yaml
ë§ˆìŠ¤í„° ë…¸ë“œ:
  CPU: 4-8 cores
  RAM: 8-16GB
  Storage: 100GB SSD
  Network: 1-10Gbps

ì›Œì»¤ ë…¸ë“œ:
  CPU: 8+ cores
  RAM: 16-64GB
  Storage: 200GB+ SSD
  Network: 1-10Gbps
```

### ë„¤íŠ¸ì›Œí¬ ì„¤ê³„

#### IP ì£¼ì†Œ ê³„íš
```yaml
# ì˜ˆì‹œ ë„¤íŠ¸ì›Œí¬ ê³„íš
Management Network: 192.168.1.0/24
  - ë§ˆìŠ¤í„° ë…¸ë“œ: 192.168.1.10-19
  - ì›Œì»¤ ë…¸ë“œ: 192.168.1.20-99
  - ë¡œë“œë°¸ëŸ°ì„œ: 192.168.1.5

Pod CIDR: 10.244.0.0/16
Service CIDR: 10.96.0.0/12
```

#### í•„ìˆ˜ í¬íŠ¸ ì˜¤í”ˆ

**ë§ˆìŠ¤í„° ë…¸ë“œ**:
```bash
# API Server
6443/tcp

# etcd
2379-2380/tcp

# Kubelet API
10250/tcp

# Scheduler
10251/tcp

# Controller Manager
10252/tcp
```

**ì›Œì»¤ ë…¸ë“œ**:
```bash
# Kubelet API
10250/tcp

# NodePort Services
30000-32767/tcp
```

### ìš´ì˜ì²´ì œ ì„¤ì •

#### CentOS/RHEL ì„¤ì •
```bash
# SELinux ë¹„í™œì„±í™”
setenforce 0
sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config

# ë°©í™”ë²½ ì„¤ì • (ì„ íƒì )
systemctl disable firewalld
systemctl stop firewalld

# swap ë¹„í™œì„±í™”
swapoff -a
sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab

# ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ ì„¤ì •
cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
br_netfilter
EOF

cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
sysctl --system
```

#### Ubuntu ì„¤ì •
```bash
# UFW ë¹„í™œì„±í™” (ì„ íƒì )
ufw disable

# swap ë¹„í™œì„±í™”
swapoff -a
sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab

# í•„ìˆ˜ ëª¨ë“ˆ ë¡œë“œ
cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
EOF

modprobe overlay
modprobe br_netfilter

# sysctl ì„¤ì •
cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF
sysctl --system
```

## ğŸ³ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì„¤ì¹˜

### containerd ì„¤ì¹˜ (ê¶Œì¥)

#### CentOS/RHEL
```bash
# Docker ì €ì¥ì†Œ ì¶”ê°€
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# containerd ì„¤ì¹˜
yum install -y containerd.io

# ì„¤ì • íŒŒì¼ ìƒì„±
mkdir -p /etc/containerd
containerd config default | sudo tee /etc/containerd/config.toml

# systemd cgroup ë“œë¼ì´ë²„ ì„¤ì •
sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml

# ì„œë¹„ìŠ¤ ì‹œì‘
systemctl enable containerd
systemctl start containerd
```

#### Ubuntu
```bash
# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
apt-get update
apt-get install -y apt-transport-https ca-certificates curl gnupg lsb-release

# Docker GPG í‚¤ ì¶”ê°€
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# ì €ì¥ì†Œ ì¶”ê°€
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# containerd ì„¤ì¹˜
apt-get update
apt-get install -y containerd.io

# ì„¤ì •
mkdir -p /etc/containerd
containerd config default | sudo tee /etc/containerd/config.toml
sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml

systemctl enable containerd
systemctl start containerd
```

## ğŸ“¦ ì¿ ë²„ë„¤í‹°ìŠ¤ íŒ¨í‚¤ì§€ ì„¤ì¹˜

### CentOS/RHEL
```bash
# ì €ì¥ì†Œ ì¶”ê°€
cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\$basearch
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
exclude=kubelet kubeadm kubectl
EOF

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes

# kubelet í™œì„±í™”
systemctl enable kubelet
```

### Ubuntu
```bash
# GPG í‚¤ ì¶”ê°€
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -

# ì €ì¥ì†Œ ì¶”ê°€
cat <<EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
apt-get update
apt-get install -y kubelet kubeadm kubectl

# ìë™ ì—…ë°ì´íŠ¸ ë°©ì§€
apt-mark hold kubelet kubeadm kubectl

# kubelet í™œì„±í™”
systemctl enable kubelet
```

## ğŸš€ ì„¤ì¹˜ ì „ëµë³„ ê°€ì´ë“œ

### ğŸ¯ kubeadm ê¸°ë°˜ ì„¤ì¹˜ (ê¶Œì¥)

**ì¥ì **:
- ê³µì‹ ì§€ì› ë„êµ¬
- ìƒëŒ€ì ìœ¼ë¡œ ê°„ë‹¨í•œ ì„¤ì •
- ê´‘ë²”ìœ„í•œ ë¬¸ì„œí™”
- ì—…ê·¸ë ˆì´ë“œ ì§€ì›

**ë‹¨ì **:
- ì´ˆê¸° ì„¤ì • ë³µì¡ë„
- ë¡œë“œë°¸ëŸ°ì„œ ë³„ë„ êµ¬ì„± í•„ìš”

**ì ìš© ì‚¬ë¡€**: ëŒ€ë¶€ë¶„ì˜ ì˜¨í”„ë ˜ í™˜ê²½

### ğŸ› ï¸ Kubespray (Ansible) ê¸°ë°˜

**ì¥ì **:
- ì™„ì „ ìë™í™”
- ë‹¤ì–‘í•œ ì˜µì…˜ ì§€ì›
- ëŒ€ê·œëª¨ ë°°í¬ ì í•©

**ë‹¨ì **:
- Ansible ì§€ì‹ í•„ìš”
- ë””ë²„ê¹… ë³µì¡

**ì ìš© ì‚¬ë¡€**: ëŒ€ê·œëª¨ í™˜ê²½, ìë™í™” ì¤‘ì‹œ

### ğŸ–¥ï¸ Rancher ê¸°ë°˜

**ì¥ì **:
- ì›¹ UI ì œê³µ
- ê´€ë¦¬ í¸ì˜ì„±
- ë©€í‹° í´ëŸ¬ìŠ¤í„° ì§€ì›

**ë‹¨ì **:
- ì¶”ê°€ ë ˆì´ì–´
- ë²¤ë” ì¢…ì†ì„±

**ì ìš© ì‚¬ë¡€**: ê´€ë¦¬ í¸ì˜ì„± ì¤‘ì‹œ

## ğŸ” ì„¤ì¹˜ í›„ ê²€ì¦

### í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
```bash
# ë…¸ë“œ í™•ì¸
kubectl get nodes

# ì‹œìŠ¤í…œ Pod í™•ì¸
kubectl get pods -n kube-system

# ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸
kubectl get componentstatuses
```

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸
```bash
# í…ŒìŠ¤íŠ¸ Pod ìƒì„±
kubectl run test-pod --image=nginx --restart=Never

# Pod ìƒíƒœ í™•ì¸
kubectl get pod test-pod

# ë¡œê·¸ í™•ì¸
kubectl logs test-pod

# ì •ë¦¬
kubectl delete pod test-pod
```

## ğŸš¨ ì‹¤ì „ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. kubeletì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ
```bash
# ë¡œê·¸ í™•ì¸
journalctl -xeu kubelet

# í”í•œ ì›ì¸
- swapì´ í™œì„±í™”ë˜ì–´ ìˆìŒ
- ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ë¬¸ì œ
- cgroup ë“œë¼ì´ë²„ ë¶ˆì¼ì¹˜
```

#### 2. Podê°€ Pending ìƒíƒœ
```bash
# Pod ìƒì„¸ ì •ë³´ í™•ì¸
kubectl describe pod <pod-name>

# í”í•œ ì›ì¸
- ë¦¬ì†ŒìŠ¤ ë¶€ì¡±
- ë…¸ë“œ ìŠ¤ì¼€ì¤„ë§ ì œì•½
- PV ë§ˆìš´íŠ¸ ì‹¤íŒ¨
```

#### 3. ë„¤íŠ¸ì›Œí¬ í†µì‹  ë¬¸ì œ
```bash
# CNI í”ŒëŸ¬ê·¸ì¸ í™•ì¸
kubectl get pods -n kube-system | grep -E "calico|flannel|weave"

# ë„¤íŠ¸ì›Œí¬ ì •ì±… í™•ì¸
kubectl get networkpolicies --all-namespaces
```

## ğŸ’¡ ì‹¤ì „ ìš´ì˜ íŒ

### ğŸ”§ ì„±ëŠ¥ ìµœì í™”
1. **SSD ì‚¬ìš©**: etcdì™€ containerdìš©
2. **ì „ìš© ë„¤íŠ¸ì›Œí¬**: í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹ ìš©
3. **ë¦¬ì†ŒìŠ¤ ì˜ˆì•½**: ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸ìš©

### ğŸ›¡ï¸ ë³´ì•ˆ ê°•í™”
1. **ìµœì†Œ ê¶Œí•œ ì›ì¹™**: RBAC ì„¤ì •
2. **ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬**: í´ëŸ¬ìŠ¤í„° ì „ìš© VLAN
3. **ì •ê¸° ì—…ë°ì´íŠ¸**: ë³´ì•ˆ íŒ¨ì¹˜ ì ìš©

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ì¤€ë¹„
1. **ë©”íŠ¸ë¦­ ìˆ˜ì§‘**: Prometheus ì¤€ë¹„
2. **ë¡œê·¸ ìˆ˜ì§‘**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹…
3. **ì•Œë¦¼ ì„¤ì •**: ì¥ì•  ëŒ€ì‘ ì²´ê³„

## ğŸ”— ë‹¤ìŒ ë‹¨ê³„

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì„¸ìš”:

- [[02-Installation/kubeadmìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•|kubeadmìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•]]
- [[02-Installation/ê³ ê°€ìš©ì„± í´ëŸ¬ìŠ¤í„° êµ¬ì„±|ê³ ê°€ìš©ì„± í´ëŸ¬ìŠ¤í„° êµ¬ì„±]]
- [[03-Cluster-Management/ë…¸ë“œ ê´€ë¦¬|ë…¸ë“œ ê´€ë¦¬]]
- [[08-Monitoring/Prometheus ìŠ¤íƒ êµ¬ì¶•|ëª¨ë‹ˆí„°ë§ ì„¤ì •]]

---

> ğŸ’¡ **ì‹¤ì „ ê²½í—˜**: ì˜¨í”„ë ˜ ì„¤ì¹˜ì˜ ì„±ê³µ ìš”ì†ŒëŠ” ì‚¬ì „ ê³„íšì…ë‹ˆë‹¤. íŠ¹íˆ ë„¤íŠ¸ì›Œí¬ì™€ ìŠ¤í† ë¦¬ì§€ ì„¤ê³„ì— ì¶©ë¶„í•œ ì‹œê°„ì„ íˆ¬ìí•˜ì„¸ìš”.

íƒœê·¸: #installation #onprem #strategy #kubeadm